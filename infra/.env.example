#######################################
# Database
#######################################

# SQLAlchemy URL (用于 API/脚本连接数据库)
DATABASE_URL=postgresql://app:app@db:5432/app

# Psycopg2 URL (主要给 Alembic / 迁移工具使用)
POSTGRES_URL=postgresql+psycopg2://app:app@db:5432/app


#######################################
# Redis
#######################################

# Redis 实例地址（用于去重/缓存/队列）
REDIS_URL=redis://redis:6379/0


#######################################
# API Keys / Tokens (填入真实值时覆盖)
#######################################

# X 平台 API Token（数据抓取用）
X_BEARER_TOKEN=your_x_bearer_token_here

# GoPlus API Key（合约安全性查询）
GOPLUS_API_KEY=your_goplus_api_key_here

# Telegram Bot Token（用于消息通知）
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here


#######################################
# Feature Flags
#######################################

# 是否启用 Demo 模式（1: demo 样例数据，0: 正常运行）
DEMO_MODE=1


#######################################
# Sentiment & Keyphrase Analysis
#######################################

# Sentiment backend: rules=规则模型, hf=HuggingFace 模型
SENTIMENT_BACKEND=rules

# 严格模式: 0=错误时回退 rules, 1=错误时直接报错
SENTIMENT_STRICT=0

# HuggingFace 模型（默认 sentiment 用）
HF_MODEL=cardiffnlp/twitter-roberta-base-sentiment-latest

# 运行设备: cpu | cuda
HF_DEVICE=cpu

# Keyphrase backend: rules=规则模型, hf=HuggingFace 模型
KEYPHRASE_BACKEND=rules


#######################################
# Event Aggregation (Day5 新增)
#######################################

# 时间桶大小（秒）
EVENT_TIME_BUCKET_SEC=600

# 参与 topic_hash 的关键词 TopK 数量
EVENT_TOPIC_TOPK=3

# topic_hash 使用的哈希算法
EVENT_HASH_ALGO=blake2s

# Event key 版本号
EVENT_KEY_VERSION=v1

# 证据保留尾部（预留参数）
EVENT_EVIDENCE_TAIL=0


#######################################
# Latency Budgets (milliseconds)
#######################################

# Filter 阶段最大延迟
LATENCY_BUDGET_MS_FILTER=10

# Refine 阶段最大延迟
LATENCY_BUDGET_MS_REFINE=20

# 整个 pipeline 端到端延迟上限
LATENCY_BUDGET_MS_TOTAL=120000


#######################################
# LLM Refiner
#######################################

# 后端选择：llm | rules
REFINE_BACKEND=llm

# Refiner 摘要最大长度
REFINE_SUMMARY_MAXLEN=80

# Refiner 阶段最大延迟 (ms)
LATENCY_BUDGET_MS_REFINE=3200

# Refiner 阶段超时阈值 (ms)
REFINE_TIMEOUT_MS=3500

# Refiner 最大重试次数
REFINE_MAX_RETRIES=0

# Refiner 提供方 (默认 openai，可替换为其他 SDK)
REFINE_PROVIDER=openai

# Refiner 使用的模型 (推荐 gpt-5-mini，兼顾成本与延迟)
REFINE_MODEL=gpt-5-mini

# OpenAI API Key (本地需手动填写，不要提交到仓库)
# OPENAI_API_KEY=sk-xxxxxxx