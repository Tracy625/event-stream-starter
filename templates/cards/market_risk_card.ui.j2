{#- Market Risk Card Template for UI (HTML) -#}
{%- set risk = card_data.goplus_risk | default(card_data.risk_level) | default('gray') -%}
<div class="card market-risk-card">
  <div class="card-header">
    {% if risk == 'red' %}
    <span class="badge badge-danger">ğŸ”´ é«˜é£é™©è­¦æŠ¥</span>
    {% elif risk == 'yellow' %}
    <span class="badge badge-warning">ğŸŸ¡ ä¸­é£é™©æç¤º</span>
    {% elif risk == 'gray' %}
    <span class="badge badge-secondary">âš« æœåŠ¡é™çº§</span>
    {% else %}
    <span class="badge badge-success">ğŸŸ¢ ä½é£é™©ä¿¡å·</span>
    {% endif %}
  </div>

  {% if card_data.token_info %}
  <div class="token-info">
    <strong>å€™é€‰ä»£å¸:</strong> {{ card_data.token_info.symbol | default('UNKNOWN') }} ({{ card_data.token_info.chain | default('eth') | upper }})
    {% if card_data.token_info.ca_norm %}
    <br><strong>åˆçº¦åœ°å€:</strong> <code>{{ card_data.token_info.ca_norm[:6] }}...{{ card_data.token_info.ca_norm[-4:] }}</code>
    {% endif %}
  </div>
  {% endif %}

  {% if card_data.risk_note %}
  <div class="alert alert-warning">
    âš ï¸ <strong>é£é™©æç¤º:</strong> {{ card_data.risk_note }}
  </div>
  {% endif %}

  <div class="security-assessment">
    <h4>ğŸ›¡ï¸ å®‰å…¨è¯„ä¼°</h4>
    <ul>
      <li><strong>GoPlusé£é™©:</strong>
        {% if risk == 'red' %}ğŸ”´ é«˜é£é™©{% elif risk == 'yellow' %}ğŸŸ¡ ä¸­é£é™©{% elif risk == 'green' %}ğŸŸ¢ ä½é£é™©{% else %}âš« æœªçŸ¥{% endif %}
      </li>
      <li><strong>ä¹°å…¥ç¨:</strong> {{ "%.1f%%" | format(card_data.buy_tax) if card_data.buy_tax is defined else "-" }}</li>
      <li><strong>å–å‡ºç¨:</strong> {{ "%.1f%%" | format(card_data.sell_tax) if card_data.sell_tax is defined else "-" }}</li>
      <li><strong>LPé”å®š:</strong> {{ "%d å¤©" | format(card_data.lp_lock_days) if card_data.lp_lock_days is defined and card_data.lp_lock_days > 0 else "æœªé”å®š" }}</li>
      <li><strong>èœœç½æ£€æµ‹:</strong> {% if card_data.honeypot is defined %}{{ "æ˜¯" if card_data.honeypot else "å¦" }}{% else %}æœªçŸ¥{% endif %}</li>
      <li><strong>å®‰å…¨æº:</strong> {{ card_data.sources.security_source if card_data.sources is defined and card_data.sources.security_source is defined else card_data.risk_source | default('-') }}</li>
    </ul>
  </div>

  {% if card_data.states is defined and card_data.states.degrade %}
  <div class="alert alert-warning">
    âš ï¸ <strong>æœåŠ¡é™çº§æç¤º:</strong> éƒ¨åˆ†æ•°æ®æœåŠ¡æš‚æ—¶ä¸å¯ç”¨ï¼Œæ˜¾ç¤ºç»“æœåŸºäºç¼“å­˜æˆ–é™çº§ç­–ç•¥
  </div>
  {% endif %}

  <div class="card-footer">
    <p>ğŸ” <strong>éªŒè¯è·¯å¾„:</strong> {{ card_data.verify_path | default('/') }}</p>
    <p>ğŸ“… <strong>æ•°æ®æ—¶é—´:</strong> {{ card_data.data_as_of | default('N/A') }}</p>
    <p class="legal-note"><em>{{ card_data.legal_note | default("æœ¬ä¿¡æ¯ä»…ä¸ºé£é™©çº¿ç´¢ä¸æŠ€æœ¯åˆ¤æ–­ï¼Œä¸æ„æˆæŠ•èµ„å»ºè®®ã€‚") }}</em></p>
  </div>
</div>